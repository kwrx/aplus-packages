language: generic

matrix:
  include:
    - os: linux
      env:
        - HOST="generic"
    - os: linux
      env:
        - HOST="x86_64"
    - os: linux
      env:
        - HOST="i686"

script:
  ci/build.sh ${HOST}

install:
  ci/install.sh



before_deploy:
  - git config --local user.name "Antonino Natale"
  - git config --local user.email "antonio.natale97@hotmail.com"
  - export TRAVIS_TAG=v0.6.$(date +'%Y%m%d')
  - git tag $TRAVIS_TAG

deploy:
  provider: releases
  api_key:
    secure: auRY9NsH85LoF85jb6SYBS7WUZOkLOk5LZAONhUzUAVQ05lh6+k5x6r0PB5uvklv00C2WrVfy26RS7wlV+Yo/RktZP4AsdvV9I1Tlcw3hzw4cJwQhT83xu5UuGtSFuZQGfrVih5sxj96zZg2aL2R3yyWVzr7BtWNSb3lTto6J/p9xYj43rldriaB/STXRGeRWo+h5Kr9UEZGf6LTydRMuAVPe+J+gsEzEPxfY5kG/Si7k8gifSItcYke64/oER20LfH96uboJsMJG58r7X8ULyM0REKstxMgiPlhs6S6wlRgG0h88/PlNKWfFHG/7mXVw0rhxJkMUsyE3wSTSkTG0Vl/1MJ1A+9j3J9GI6AMvyHiHhQvrHwJ+Vnw4k14+7fYChf6jcYu9mpYDYLYxH31oFbWiUPI79T+l5RX57182OLcaT476i4ragZCr9/wyUEuAA4rDVi8eRO39DRXM6XLjbRPJsoYGqBk5U8KIv+9uMVETqDFcU8CmQDibmwkKUD62tkHan7f4uaB977D5jgPawhPd6sN+6ChgxIKX1HqGpJZ8OhAS1SLzBcV310IF7rsKKfa0RowEajUI9OelHYy11/VIZH8/3HUcZf/5yVu4inOrRcnGvFJhIuGvyTEpvI4wxTxufpWJxNQvt3S2rjXTH422qRqdKpKc+hCxRGmZvA=
    
  file:
    '*.tar.xz'

  skip_cleanup: true
  overwrite: true
  draft: false
  file_glob: true

  on:
    repo: kwrx/aplus-packages
    tags: false