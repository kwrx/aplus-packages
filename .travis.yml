language: generic

matrix:
  include:
    - os: linux
      env:
        - HOST="generic"
    - os: linux
      env:
        - HOST="x86_64"
    - os: linux
      env:
        - HOST="i686"

script:
  ci/build.sh ${HOST}

install:
  ci/install.sh



before_deploy:
  - git config --local user.name "Antonino Natale"
  - git config --local user.email "antonio.natale97@hotmail.com"
  - export TRAVIS_TAG=v0.6.$(date +'%Y%m%d')
  - git tag $TRAVIS_TAG

deploy:
  provider: releases
  api_key:
    secure: Zdh6BmNGuHNFQzfJ02g2ATXY8VCm8GLEFy7kttcjhXNt0rvC9a16iKFx5WtH+tN4n0Iwtc6Km+ZGIx8zO4USobPmRQxwf6tjcSp4uJJZCVMkz6C4hKYrtEx6lgVDt+EQJLcLgVmshzED0L6demq+Hp/77tPHZggmXZKF4rJGcoBfBfxiE/48ykyTiHmJdB7pLz/uDN2ZRO2NI3BVUqUAikcYCNxnuByg1D6J3rIR5De5At/E+jkbTd97+Bc9KUd1YrshLhjpM/6qmVam2f7oiD71DdGFYuz2EB+xR/oWmQaXzf3K+Ykr88m7N+H36QJ33OxTYOzWhFzFOr2L9WUTrDfJJKwU/kJZq5uneH3yClmzLfyJUAwv8FF88dQJZbZaZaR7CuJsPjee9g7fsc9rQ8pNkOgmRb8/Dhw7jj5RuhW4NPlrMObRyHRu5Ii/U5LekTH1DzdjgWaj7MRnpOqinnlh9jMv/hSPZw89dRP1sEFDG4Q14JMPihZI8zy8zR4X2vkyZBcvZL4+//xD5jRKM9brud3tUFng6FcuC6N+u87KYC95qXgtdWL6cs6mMzRQJ0EhEfzWEhI8XQDkn8T8XU6oWFfLPdhh9XlSTDIzPnGDC6X+epL7+VUObQg7+qsLtYPngKtdieAdopL9GN93W4m7J7NNNg5+nIML99G0GhI=
    
  file:
    '*.tar.xz'

  skip_cleanup: true
  overwrite: true
  draft: false
  file_glob: true

  on:
    repo: kwrx/aplus-packages
    tags: false